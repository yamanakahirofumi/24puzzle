# UI/UX 仕様

本ドキュメントでは、24-Puzzle の画面構成、操作感、およびユーザー体験に関する詳細を定義します。

## 1. 画面構成
アプリケーションは単一のウィンドウで構成され、以下の要素を含みます。

### 1.1 パズルエリア
- 5×5 のグリッドで構成されます。
- 各マスには数字パネルまたは画像の一部が表示されます。
- 空きマスは 1 つだけ存在し、通常は背景色（例：黒またはグレー）で示されます。

### 1.2 コントロールパネル
パズルエリアの横または下に配置され、以下の要素を含みます。
- **手数表示 (Move Count)**: 現在の移動回数を表示します。
- **タイマー (Timer)**: ゲーム開始からの経過時間を表示します（形式: `mm:ss`）。
- **シャッフル/開始ボタン**: パズルをランダムに並べ替え、ゲームを開始します。
- **画像選択ボタン**: ユーザーがローカルの画像ファイルを選択するためのファイルダイアログを開きます。仕様の詳細（サポート形式や画像加工ルール）は[画像読み込みの仕様](Image-Loading-Specification.md)を参照してください。
- **完成図プレビュー**: 読み込まれた画像の全体像を縮小表示します。パズルを解く際のガイドとなります。
- **リセットボタン**: 現在のゲームを中断し、初期状態（完成図）に戻します。
- **数字表示の切り替え**: 画像パズル時に、パネル上の数字（正解の位置を示す番号）の表示/非表示を切り替えるチェックボックスです。表示仕様の詳細は[数字の仕様](Number-Specification.md)を参照してください。

### 1.3 画像パズル時の数字表示
画像パズルをプレイする際、各パネルには正解の位置（初期位置）を示す数字が表示されます。この表示に関する詳細（配置、装飾、切り替え機能など）は、[数字の仕様](Number-Specification.md)に集約されています。

## 2. 操作方法
- **パネルの移動**:
    - 空きマスに隣接するパネルをクリックまたはタップすると、そのパネルが空きマスの位置にスライドします。
    - 移動可能なパネルにマウスカーソルを合わせた際、視覚的なフィードバック（ハイライト等）を与えます。
- **キーボード操作**:
    - 矢印キーを使用して、空きマスに隣接するパネルを動かすことができます。
    - **マッピング**:
        - `↑` (Up): 空きマスの**上**にあるパネルを下に移動させる。
        - `↓` (Down): 空きマスの**下**にあるパネルを上に移動させる。
        - `←` (Left): 空きマスの**左**にあるパネルを右に移動させる。
        - `→` (Right): 空きマスの**右**にあるパネルを左に移動させる。
      （※直感的に「空きマスをその方向に動かす」という感覚で操作できるよう定義します）

## 3. ユーザー体験 (UX)
- **アニメーション**:
    - パネルの移動は瞬時ではなく、滑らかなスライドアニメーションを伴うことで、移動の方向性を分かりやすくします。
- **勝利演出**:
    - パズルが完成した際、ダイアログを表示して祝福し、最終的な手数とタイムを示します。
- **エラー表示**:
    - サポート外の画像形式を選択した場合や、画像の読み込みに失敗した場合は、分かりやすいエラーメッセージを表示します。

## 4. 画面遷移図（簡易）
1. **起動時**: 完成した状態（またはデフォルト画像）のパズルが表示される。
2. **シャッフル後**: タイマーが動き出し、ゲームプレイ開始。
3. **完成時**: タイマー停止。結果ダイアログ表示。
